{
  "name": "Jom Sihat",
  "description": "Malaysian Fitness & Health Platform",
  "type": "docker-compose",
  "version": "1.0.0",
  "repository": {
    "url": "https://github.com/afeezaziz/jomsihat",
    "branch": "main"
  },
  "environments": {
    "production": {
      "name": "Production",
      "domains": ["jomsihat.com", "www.jomsihat.com"],
      "environment_variables": {
        "FLASK_ENV": "production",
        "FLASK_APP": "app.py",
        "SECRET_KEY": "{{COOLIFY_SECRET_KEY}}",
        "HOST": "0.0.0.0",
        "PORT": "5000"
      },
      "services": {
        "web": {
          "image": "ghcr.io/afeezaziz/jomsihat:latest",
          "ports": ["5000:5000"],
          "health_check": {
            "path": "/health",
            "interval": "30s",
            "timeout": "10s",
            "retries": 3
          },
          "volumes": [
            "./app/templates:/app/app/templates:ro",
            "./app/static:/app/app/static:ro",
            "./app/translations.json:/app/app/translations.json:ro"
          ],
          "restart_policy": "unless-stopped"
        },
        "nginx": {
          "image": "nginx:alpine",
          "ports": ["80:80", "443:443"],
          "volumes": [
            "./nginx/nginx.conf:/etc/nginx/nginx.conf:ro",
            "./app/static:/var/www/static:ro",
            "./ssl:/etc/nginx/ssl:ro"
          ],
          "depends_on": ["web"],
          "restart_policy": "unless-stopped"
        }
      },
      "ssl": {
        "enabled": true,
        "provider": "letsencrypt",
        "email": "admin@jomsihat.com"
      },
      "backup": {
        "enabled": true,
        "schedule": "0 2 * * *",
        "retention": 7
      }
    },
    "staging": {
      "name": "Staging",
      "domains": ["staging.jomsihat.com"],
      "environment_variables": {
        "FLASK_ENV": "staging",
        "FLASK_APP": "app.py",
        "SECRET_KEY": "{{COOLIFY_SECRET_KEY_STAGING}}",
        "HOST": "0.0.0.0",
        "PORT": "5000"
      },
      "services": {
        "web": {
          "image": "ghcr.io/afeezaziz/jomsihat:develop",
          "ports": ["5000:5000"],
          "health_check": {
            "path": "/health",
            "interval": "30s",
            "timeout": "10s",
            "retries": 3
          },
          "volumes": [
            "./app/templates:/app/app/templates",
            "./app/static:/app/app/static",
            "./app/translations.json:/app/app/translations.json"
          ],
          "restart_policy": "unless-stopped"
        }
      }
    }
  },
  "deployment": {
    "strategy": "rolling",
    "health_check_timeout": "300s",
    "zero_downtime": true
  },
  "monitoring": {
    "enabled": true,
    "metrics": ["cpu", "memory", "disk", "network"],
    "alerts": {
      "cpu_threshold": 80,
      "memory_threshold": 85,
      "disk_threshold": 90
    }
  },
  "scaling": {
    "min_replicas": 1,
    "max_replicas": 3,
    "target_cpu_utilization": 70
  }
}